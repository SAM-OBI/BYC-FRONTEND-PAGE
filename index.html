<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BYC PAGE</title>
    <!-- bootstrap cdn  -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">
    <link rel="shortcut icon" href="./images/BYC LOGO JPG FILE 1.png" type="image/x-icon">

    <!-- font awesome cdn  -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body onload="checkLoginStatus(),updateWishlistCount(),updateCartCount(),setupTabs(), loadHeroBlogs()">
  <main class="home-main">
      <!-- NAVBAR STARTS HERE -->

    <nav class="navbar navbar-expand-lg mb-5 mb-lg-5 pb-lg-5">
        <div class="container-fluid mt-2"> 
              <!-- Left UL LI -->
                <div class="d-none d-lg-flex">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item"><a class="nav-link font-seog" href="./allProducts.html">Shop Products</a></li>
                        <li class="nav-item"><a class="nav-link" href="./blog.html">Blog</a></li>
                        <li class="nav-item"><a class="nav-link" href="./blog_home.html">FAQ</a></li>
                    </ul>
                </div> 

            <!-- BYC LOGO (Center) -->
             <a class="navbar-brand mx-lg-auto" href="./index.html">
              <img src="./images/BYC LOGO JPG FILE 1.png" alt="BYC Logo">
            </a> 

            <!-- Right Menu -->
            <div class="d-none d-lg-flex align-items-center ">
              <ul class="navbar-nav gap-2">
                  <li class="nav-item "><a class="nav-link abbt" href="./aboutUs.html">About Us</a></li>
                  <li class="nav-item "><a class="nav-link abbt" href="./contact.html">Contact</a></li>
              </ul>
              <div class="icon-links d-flex align-items-center ">
                  <a href="#"><i class="fas fa-search mx-lg-1"></i></a>
                  <a href="./signUp.html" ><i class="fa-solid fa-user-plus mx-lg-2" id="loggedOut"></i></a>
                  <a href="" class="user-login" id="loggedIn">
                    <i class="fa-solid fa-user mx-lg-1 " id="loggedIn">
                      <span class="status-dot"></span>
                    </i>
                  </a>
                  <a href="./wishlist.html"><i class="far fa-heart mx-lg-2 me-lg-4" id="fa-heart"></i></a>
                  <a href="./cart.html"  class="cart-icon">
                     <i class="fas fa-shopping-cart"></i>
                        <span id="cart-count" class="cart-count">0</span>
                </a>
              </div>
            </div>
            <!-- Mobile Toggler -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mobileMenu">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>

          <!-- Mobile Menu -->
        <div class="collapse navbar-collapse mt-3" id="mobileMenu">
            <ul class="navbar-nav text-start ps-3">
                <li class="nav-item d-lg-none"><a class="nav-link" href="./allProducts.html">Shop Products</a></li>
                <li class="nav-item d-lg-none"><a class="nav-link" href="./blog.html">Blog</a></li>
                <li class="nav-item d-lg-none"><a class="nav-link" href="./blog_home.html">FAQ</a></li>
                <li class="nav-item d-lg-none"><a class="nav-link" href="./aboutUs.html">About Us</a></li>
                <li class="nav-item d-lg-none"><a class="nav-link" href="./contact.html">Contact</a></li>
                <li class="nav-item d-flex justify-content-start  gap-3 mt-1 text-start">
                  <!-- <a href="#" class="d-lg-none"><i class="fas fa-search text-dark"></i></a>
                  <a href="./signUp.html" class="d-lg-none"><i class="fa-solid fa-user-plus mx-lg-2 regIcon"></a>
                  <a href="./wishlist.html" class="d-lg-none"><i class="far fa-heart text-dark"></i></a>
                  <a href="./cart.html" class="d-lg-none"><i class="fas fa-cart-shopping text-dark"></i></a> -->
                  <a href="" class="d-lg-none"><i class="fas fa-search text-dark"></i></a>
                  <a href="./signUp.html" class="d-lg-none"><i class="fa-solid fa-user-plus mx-lg-2 regIcon text-dark" id="loggedOut"></i></a>
                  <a href="" class="user-login" id="loggedIn">
                    <i class="fa-solid fa-user mx-lg-2 " id="loggedIn">
                      <span class="status-dot"></span>
                    </i>
                  </a>
                  <a href="wishlist.html" class="d-lg-none"><i class="far fa-heart text-dark" id="fa-heart"></i></a>
                  <a href="./cart.html"  class="cart-icon d-lg-none">
                     <i class="fas fa-shopping-cart"></i>
                        <span id="cart-count" class="cart-count">0</span>
                </a>
                </li>
            </ul>
        </div>
    </nav> 
      <!--NOTE: All the sections are here And all the BUTTON have an ONCLICK EVEN WITH DEFAULT TYPOGRAPHY -->
      
      <!-- section 1 starts here -->
    <section class="container"> <!-- section class="sec1" -->
        <!-- head Content here -->
        <div class="text-center sec1 mb-3 mb-lg-5">
              <p class="text-dark fs-1 sec1-p" >Your body deserves comfort</p>
              <h1 class="fw-5 fs-1 mb-lg-5 sec1-h mb-4 pt-0">Get the best for <span id="display"></span></h1>
              <div> <!-- div for the 2 default button  -->
                  <button type="button" class="all-btn py-1 px-3 mx-0 me-lg-4 py-md-1 gap-3 text-light mb-3" style="background-color: black; margin-right: 3%;" onclick="shopNow(event)">
                      Shop Now
                  </button>
                  <button type="button" class="all-btn py-1 px-3 btn-outline-dark" onclick="learnMore(event)">
                        Learn more
                  </button>
                </div>
        </div>
        <div class="row g-3 mt-5 mt-md" style="text-align: center;">
            <div class="col-12 col-md-4">
                <img src="./images/Frame 180.png" alt="Image 1" class="img-fluid  product-img ms-lg-4 ms-md-0 pt-md-5 mt-md-5 pt-lg-5 mt-lg-5" >
            </div>
            <div class="col-12 col-md-4">
                <img src="./images/Frame 179.png" alt="Image 2" class="img-fluid  product-img IMG " style="height: 515px;">
            </div>
            <div class="col-12 col-md-4">
                <img src="./images/Frame 181.png" alt="Image 3" class="img-fluid  product-img pt-md-5 mt-md-5 pt-lg-5 mt-lg-5">
            </div>
        </div>
    </section>

    <!-- section 2 starts here -->
    <section class="container-fluid sec2">
          <div class="text-center my-lg-5 py-lg-5"> <!-- text-center for the heading h2 -->
            <h2 class="text-dark fw-5 fs-1 my-5">Checkout BYC New Arrivals</h2>
          </div>
          <!-- row for the 3 product cards -->
          <div class="row mx-4">
            <!-- Product Card 1 left-->
              <div class="col-lg-4 col-md-4 col-sm-12">
                  <img src="./images/Frame 42.png" class="card-img-top" alt="Product Image">
                  <div class="mt-2 mt-lg-5">
                    <h5 class="card-title mb-2 mb-lg-2">Men Underwears</h5>
                    <p class="card-text mb-5" >Parturient Venenatis Etiam</p>
                  </div>
              </div>   

              <!-- Product Card 2 middle -->
              <div class="col-lg-4 col-md-4 col-sm-12">
                    <img src="./images/Frame 41.png" class="card-img-top" alt="Product Image">
                  <div class="mt-2 mt-lg-5">
                    <h5 class="card-title mb-2 mb-lg-2">Men Underwears</h5>
                    <p class="card-text mb-5" >Parturient Venenatis Etiam</p>
                  </div>
              </div>   

              <!-- Product Card 3 right -->
              <div class="col-lg-4 col-md-4 col-sm-12">
                    <img src="./images/Frame 34.png" class="card-img-top" alt="Product Image">
                  <div class="mt-2 mt-lg-5">
                    <h5 class="card-title mb-2 mb-lg-2">Men Underwears</h5>
                    <p class="card-text mb-5" >Parturient Venenatis Etiam</p>
                  </div>
              </div>   
          </div>
            <!-- default button  for the product card sec 2-->
          <div class="text-center mt-5 mt-md-3 mb-md-5 b-lg-5 pb-lg-4">
            <button type="button" class="all-btn py-1 px-3 btn-outline-dark" onclick="viewAllNewArrival(event)">
              View All
            </button>
          </div>
    </section>

    <!-- section 3 starts here -->
    <section class="container-fluid sec3">
      <!-- row for the 2 columns -->
      <div class="row ms-lg-5"> 
        <!-- left column -->
          <div class="col-sm-12 col-md-6 col-lg-6 collection1"> 
            <div class="container mt-5 mb-4 sec3-left d-flex justify-content-center align-items-center" >
              <div class=" sec3-pad text-start ">
                  <h2 class=" ">BYC Collection 2021</h2>
                  <h3 class="my-4 mb-lg-3 ">BYC Collection</h3>
                  <p class="explore-p fs-5 mb-2 ">The best everyday option in a Super Saver range within a <br>reasonable price. It is our responsibility to keep you <br>100 percent stylish. Be smart & trendy with us. </p>
                 <button type="button" class=" text-center  all-btn btn-outline-dark explore" onclick="exploreCollection(event)">
                    Explore
                  </button>
              </div>
              <!-- image under the first column div  -->
            </div>
                
              <div class="mt-lg-4 mt-5 mt-md-4 img-col">
                  <img src="./images/Frame 167.png" alt="" class="img-fluid mb-lg-4 ps-3 sec3-Img">
              </div>
          </div>

          <!-- right column -->
          <div class="col-sm-12 col-md-6 col-lg-6 mb-lg-5 sec3right-col">
            <!-- each image will be wrapped in a div with class "mt-lg-5" for margin-top on large screens  -->
            <div class="mt-lg-5 frames">
              <img src="./images/Frame 166.png" alt="" class="img-fluid mb-5 mb-lg-4 sec3-Img2">
              </div>
              
              <div>
                <img src="./images/Frame 168.png" alt="" class="img-fluid sec3-Img3">
              </div>
            </div>
      </div>

            <div class="text-center mt-lg-4">
              <button type="button" class=" text-center all-btn btn-outline-dark" onclick="viewAllCollection(event)">
                View All
              </button>
            </div>

    </section>

    <!-- section 4 starts here -->
    <section class="container py-5 sec4">
        <div>
          <h2 class="text-dark text-center fw-5 fs-1 my-5 mt-2 mt-lg-5">Shop By Category</h2>
          <!-- Category Tabs -->
          <ul class="nav d-flex justify-content-center mb-3 category-tabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link sec4-tag active" data-bs-toggle="tab" href="#forWomen">For Women</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link sec4-tag" data-bs-toggle="tab" href="#men">For Men</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link sec4-tag" data-bs-toggle="tab" href="#kids">For Kids</a>
                </li>
          </ul>
        </div>
        <!-- Subcategory Buttons -->
        <div class="my-4 pb-5 mb-lg-5">
            <ul class="d-flex justify-content-center mb-4 subcategory-btns" id="forWomen">
                  <li class="nav-item">
                     <a class="nav-link sec4-a" href="#">Camisole</a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link sec4-a mx-3" href="#">Singlet</a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link sec4-a" href="#">Pants</a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link sec4-a ms-3" href="#">Bra</a>
                  </li>
              </ul>

              <ul class="d-flex justify-content-center mb-4 subcategory-btns d-none" id="forMen">
                  <li class="nav-item">
                     <a class="nav-link sec4-a" href="#">T-Shirt</a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link sec4-a  mx-3" href="#">Singlet</a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link sec4-a" href="#">Vest</a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link sec4-a ms-3" href="#">Boxers</a>
                  </li>
              </ul>

              <ul class="d-flex justify-content-center mb-4 subcategory-btns d-none" id="forKids">
                  <li class="nav-item">
                      <a class="nav-link sec4-a" href="#">Vest</a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link sec4-a mx-3" href="#">Singlet</a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link sec4-a" href="#">Pants</a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link sec4-a ms-3" href="#">Boxers</a>
                  </li>
              </ul>

        </div>

            <!-- Product Carousel -->



      <div id="productCarousel" class="carousel slide mt-lg-4 " data-bs-ride="carousel">
              <div class="carousel-inner">
                <!-- Slide 1 -->
                <div class="carousel-item active">
                  <div class="d-flex flex-wrap  overflow-auto">
                    <div class="col-10 col-sm-6 col-md-4 col-lg-3">
                      <div class="product-card text-center">
                        <img src="./images/Card.png" alt="Product 4" class="d-block w-100">
                        <p class="fw-bold mt-3">WOWEN PANTS <span class="text-muted">BYC-501LMS</span></p>
                        <p>₦2,800.00</p>
                      </div>
                    </div>
                    <div class="col-10 col-sm-6 col-md-4 col-lg-3">
                      <div class="product-card text-center">
                        <img src="./images/Card (1).png" alt="Product 5" class="d-block w-100">
                        <p class="fw-bold mt-3">WOWEN PANTS <span class="text-muted">BYC-501LMS</span></p>
                        <p>₦2,800.00</p>
                      </div>
                    </div>
                    <div class="col-10 col-sm-6 col-md-4 col-lg-3">
                      <div class="product-card text-center">
                        <img src="./images/Card (2).png" alt="Product 6" class="d-block w-100">
                        <p class="fw-bold mt-3">WOWEN PANTS <span class="text-muted">BYC-501LMS</span></p>
                        <p>₦2,800.00</p>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Slide 2 -->
                <div class="carousel-item">
                  <div class="d-flex flex-wrap flex-md-nowrap overflow-auto">
                    <div class="col-10 col-sm-6 col-md-4 col-lg-3">
                      <div class="product-card text-center">
                        <img src="./images/Card (1).png" alt="Product 4" class="d-block w-100">
                        <p class="fw-bold mt-3">WOWEN PANTS <span class="text-muted">BYC-501LMS</span></p>
                        <p>₦2,800.00</p>
                      </div>
                    </div>
                    <div class="col-10 col-sm-6 col-md-4 col-lg-3">
                      <div class="product-card text-center">
                        <img src="./images/Card.png" alt="Product 5" class="d-block w-100">
                        <p class="fw-bold mt-3">WOWEN PANTS <span class="text-muted">BYC-501LMS</span></p>
                        <p>₦2,800.00</p>
                      </div>
                    </div>
                    <div class="col-10 col-sm-6 col-md-4 col-lg-3">
                      <div class="product-card text-center">
                        <img src="./images/Card (2).png" alt="Product 6" class="d-block w-100">
                        <p class="fw-bold mt-3">WOWEN PANTS <span class="text-muted">BYC-501LMS</span></p>
                        <p>₦2,800.00</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Controls -->
              <button class="carousel-control-prev" type="button" data-bs-target="#productCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#productCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
              </button>
            </div>
            <!-- View All Button -->
            <div class="text-center mt-5">
              <button class="all-btn">View All</button>
            </div>
    </section>
      <!-- section 4 ends here -->

      <!-- SECTION 5 STARTS HERE -->
  <section class="container-fluid index-sec5 sec5">
  <div class="text-center my-lg-5 py-lg-5">
    <h2 class="text-dark fw-5 fs-1 my-5 pb-lg-5">BYC AFRICA Blog News</h2>
    <div id="blogRow" class="row row-cols-1 row-cols-md-3 g-4 mx-lg-2 mt-lg-5"></div>
    <div class="text-center mt-4">
      <!-- <a href="blog.html" class="btn btn-outline-dark px-4">View All</a> -->
      <div class="text-center mt-lg-5 mb-lg-5 pb-lg-4">
              <a type="button" class="all-btn mt-5 pt-3 text-dark text-decoration-none fs-4 btn-outline-dark" onclick="viewAllBlogs(event)">
                View All
              </a>
          </div>
    </div>
  </div>
</section>


    <footer class=" mt-5 py-4 pb-2 footer-font " style="background-color: #212121;">
        <div class="container pt-lg-5 mt-lg-5 py-md-3 text-light">
            <div class="row foot-row">

                <div class="col-sm-12 col-md-2 mb-4 col-lg-2 mb-md-0 col-a ps-lg-2">
                    <h5 class="text-captalize mb-lg-3">Company Info </h5>
                    <ul class="list-unstyled text-light">
                        <li class="my-2"><a href="#" class="text-light " style="text-decoration: none; ">About Us</a></li>
                        <li><a href="#" class="text-light" style="text-decoration: none;">Affiliate</a></li>
                        <li class="my-2"><a href="#" class="text-light"style="text-decoration: none;">Fashion Blogger</a></li>
                    </ul>
                </div>

                <div class="col-sm-12 col-md-2 mb-4 col-lg- mb-md-0 col-b ps-lg-0">
                    <h5 class="text-captalize mb-lg-3">Help & Support</h5>
                    <ul class="list-unstyled text-light">
                        <li class="my-2"><a href="#" class="text-light " style="text-decoration: none;">Shipping Info</a></li>
                        <li><a href="#" class="text-light" style="text-decoration: none;">Refunds</a></li>
                        <li class="my-2"><a href="#" class="text-light" style="text-decoration: none;">How to Order</a></li>
                        <li><a href="#" class="text-light" style="text-decoration: none;">How to Track</a></li>
                        <li class="my-2"><a href="#" class="text-light" style="text-decoration: none;">Size Guide</a></li>
                    </ul>
                </div>

                <div class="col-sm-12 col-md-5 mb-4 col-lg-4 mb-md-0 col-c  ps-lg-0">
                    <h5 class="text-captalize mb-lg-3">Customer Care</h5>
                    <ul class="list-unstyled">
                        <li class="my-2"><a href="#" class="text-light " style="text-decoration: none;">Contact Us</a></li>
                        <li><a href="#" class="text-light" style="text-decoration: none;">payment Methods</a></li>
                        <li class="my-2"><a href="#" class="text-light"style="text-decoration: none;">Fashion Blogger</a></li>
                        <a href="#"><img src="./images/paypal.png" alt="paypal" style="width: 40px; height: 20px;"></a>
                        <a href="#"><img src="./images/visa.png" class="mx-4 img-fluid my-2" alt="visa" style="width: 40px; height: 20px;"></a>
                        <a href="#"><img src="./images/MasterCard.png" alt="MasterCard" style="width: 40px; height: 20px;"></a>
                        
                    </ul>
                </div>

                <div class="col-sm-12 col-md-3 mb-4 col-lg-3 col-d p-lg-0"> 
                    <h5 class="text-captalize mb-3">Signup For The Latest News</h5>
                    <form class="form">
                        <span class="mail-span mb-3">
                            <input type="email" class="text-start mb-lg-5 contact-mail" placeholder="Enter Email" aria-label="Email">
                            <button class="email-btn" onclick="submitEmail(event)"><i class="fas fa-arrow-right text-light btn-arr"></i></button>
                        </span>
                    </form>

                    <!-- Contact Section -->
                    <div class="contact-info mt-2">
                        <a href="" class="text-decoration-none text-light">
                            <i class="fa-regular fa-envelope fa-xl me-2 mb-4"></i>
                            bycafrica@gmail.com
                        </a>
                        <br>
                        <div class="d-flex align-items-center justify-content-lg-center">
                            <a href="" class="text-decoration-none text-light">
                                <i class="fa-solid fa-phone"></i>
                            </a>
                            <div class="d-flex align-items-center justify-content-center pt-2 flex-colum">
                                <p class="pt-2 ps-3 ps-lg-3">+234810137537:</p>
                                <p class="pt-2">+234905403403</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="text-center text-lg-center mt-5 pt-lg-5">
                <a href="#" class="text-decoration-none">
                    <i class="fa-brands fa-facebook fa-2xl text-dark" ></i>
                </a>
                <a href="#" class="text-decoration-none">
                    <i class="fab fa-instagram fa-2xl text-dark mx-lg-5 mx-3"></i>
                </a>
                <a href="#" class="text-decoration-none">
                    <i class="fab fa-twitter fa-2xl text-dark me-lg-5 me-3"></i>
                </a>
                <a href="#" class="text-decoration-none">
                    <i class="fab fa-youtube fa-2xl text-dark mb-3 mb-lg-4"></i>
                </a>
                <hr style="border: 2px solid #fff; background-color: #fff; box-shadow: #e7e6e63d 0px 3px 8px;">
                <p class="mt-5 copyright">All rights Reserved  copyright bycafrica 2021.</p>
            </div>
            <!-- Footer Content ends here -->
        </div>
    </footer>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js" integrity="sha384-7qAoOXltbVP82dhxHAUje59V5r2YsVfBafyUDxEdApLPmcdhBPg1DKg1ERo0BZlK" crossorigin="anonymous"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="./js/index.js"></script>
   
  <script>
     function initNavbarSearch() {
    const navbar = document.querySelector(".navbar");
    if (!navbar) return;
    // Create search input
    const searchInput = document.createElement("input");
    searchInput.id = "searchInput";
    searchInput.placeholder = "Search for products...";
    navbar.appendChild(searchInput);
    // Create dropdown
    const searchResults = document.createElement("ul");
    searchResults.id = "searchResults";
    navbar.appendChild(searchResults);
    // Elements to hide while search is active
    const hideElements = [
        document.querySelector('.abbt'),
        document.querySelector('.abbt '),
        document.querySelector('.navbar-brand') // logo
    ];
    const searchIcon = navbar.querySelector(".fa-search");
    // Toggle search input visibility
    function toggleSearch(show) {
        if (show) {
            searchInput.style.display = "inline-block";
            // Calculate total width of elements to hide
            let totalWidth = 0;
            hideElements.forEach(el => {
                if (el) {
                    totalWidth += el.getBoundingClientRect().width + 75;
                    el.classList.add("hide");
                }
            });
            searchInput.style.width = totalWidth + "px";
            // Position input at the left of the first hidden element
            if (hideElements[2]) { // logo
                const rect = hideElements[2].getBoundingClientRect();
                searchInput.style.left = rect.left + "560px";
            }
            searchResults.style.width = totalWidth + "700px";
            searchInput.focus();
        } else {
            searchInput.style.display = "none";
            searchResults.style.display = "none";
            hideElements.forEach(el => el?.classList.remove("hide"));
        }
    }
    // Fetch products from API
    let productsCache = [];
    async function fetchProducts() {
        try {
            const res = await fetch("http://localhost:3001/byc/api/products");
            const data = await res.json();
            return data; // array of products with `name` field
        } catch (err) {
            console.error(err);
            return [];
        }
    }
    // Input typing event
    searchInput.addEventListener("input", async () => {
        const query = searchInput.value.toLowerCase().trim();
        if (!query) {
            searchResults.style.display = "none";
            return;
        }
        if (!productsCache.length) {
            productsCache = await fetchProducts();
        }
        const matches = productsCache.filter(p => p.name.toLowerCase().includes(query));
        searchResults.innerHTML = matches.length
            ? matches.map(p => `<li data-name="${p.name}">${p.name}</li>`).join("")
            : "<li>No product found</li>";
        searchResults.style.display = "block";
    });
    // Click on dropdown item
    searchResults.addEventListener("click", e => {
        if (e.target.tagName === "LI" && e.target.textContent !== "No product found") {
            localStorage.setItem("searchQuery", e.target.dataset.name);
            window.location.href = "./allProducts.html";
            toggleSearch(false);
        }
    });
    // Enter key behavior
    searchInput.addEventListener("keydown", e => {
        if (e.key === "Enter") {
            const query = searchInput.value.trim();
            if (query) {
                localStorage.setItem("searchQuery", query);
                window.location.href = "./allProducts.html";
            }
            toggleSearch(false);
        }
    });
    // Click outside to close
    document.addEventListener("click", e => {
        if (!searchInput.contains(e.target) && !searchIcon.parentElement.contains(e.target)) {
            toggleSearch(false);
        }
    });
    // Click search icon (fix: prevent <a> default)
    searchIcon.parentElement.addEventListener("click", e => {
        e.preventDefault(); // prevent page jump
        toggleSearch(true);
    });
  }
  // Initialize after DOM is ready
  document.addEventListener("DOMContentLoaded", () => {
    setupTabs();
    initNavbarSearch();
  });


  // Toggle active state on subcategory buttons
  document.querySelectorAll('.subcategory-btns .btn').forEach(button => {
    button.addEventListener('click', () => {
      document.querySelectorAll('.subcategory-btns .btn').forEach(btn => btn.classList.remove('active'));
      button.classList.add('active');
    });
  });
  function setupTabs() {
    const tabs = document.querySelectorAll('[data-bs-toggle="tab"]');
    const contents = ['#forWomen', '#forMen', '#forKids'].map(id => document.querySelector(id));
    tabs.forEach(tab => {
        tab.addEventListener('click', e => {
            e.preventDefault();
            const targetId = tab.getAttribute('href');
            contents.forEach(content => content.style.display = 'none');
            const targetContent = document.querySelector(targetId);
            if (targetContent) targetContent.style.display = 'block';
        });
    });
    document.querySelector('#forWomen').style.display = 'block';
  }


 // Reusable truncate
  function truncateContent(text, wordLimit, showMore = false) {
    const words = text.split(" ");
    if (words.length <= wordLimit) return text;
    return words.slice(0, wordLimit).join(" ") + ".";
  }
  // Fetch blogs & render
  async function loadHeroBlogs() {
    try {
      const res = await fetch("http://localhost:3001/byc/api/blogs/published");
      const blogs = await res.json();
      const heroBlogs = blogs.slice(0, 3); // first 3
      const blogRow = document.getElementById("blogRow");
      blogRow.innerHTML = heroBlogs.map(blog => `
        <div class="col med">
            <div class="card h-100 border-0 rounded-0">
                <!-- Blog Image -->
                <img src="${blog.blogImage}" class="rounded-0" alt="Blog image" style=" width: 100%; height: 400px; object-fit: cover;">
                <div class="card-body text-start ms-2 midh"  style = "height: 500px;">
                    <!-- Profile & meta -->
                    <div class="d-flex align-items-center my-3 " style ="background-color : #E0E0E0;">
                        <img src="${blog.profileImage}" class=" me-2" width="80" height="80" alt="Profile">
                        
                        <div class="ms-5 d-flex gap-5">
                            <span ><i class="fa-slab-press fa-regular fa-eye ms-lg-3 me-2 me-lg-2"></i> 35</span>
                            <span><i class="fa-regular fa-heart me-2 ms-lg-0 ms-5"></i> 23</span>
                          </div>
                    </div>
                    <div class="d-flex gap-2 mb-5">
                        <small class="fw-bold fs-6">${blog.profileName}</small><br>
                        <small class="text-muted fs-6">.${blog.ownersProfession}</small>
                      </div>
                    <!-- Title -->
                    <h5 class="fw-bold" style="height: 70px;">${truncateContent(blog.title, 8)}</h5>
                    <!-- Content -->
                    <p class="text-muted mb-5" style="height: 90px;">${truncateContent(blog.content, 23)}</p>
                    <!-- Read More -->
                    <a class="btn-tag " href="./blog.html#first-blog" role="button">Read more<i class="fa-solid fa-arrow-right fa-l arrow-btn"></i></a>

                </div>
            </div>
        </div>
      `).join("");
    } catch (err) {
      console.error("Error loading blogs:", err);
    }
  }



</script>
  </body>
</html>